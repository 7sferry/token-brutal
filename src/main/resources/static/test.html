<!--~~~~~~~~~~~~~~~~~~~~~
  ~ Made by [MR Ferryâ„¢] ~
  ~ on November 2025    ~
  ~~~~~~~~~~~~~~~~~~~~~-->
<!DOCTYPE html>
<html lang="id">
<head>
	<title>JWT Cookie Demo</title>
</head>
<body>
<h2>Login</h2>
<label for="username"></label><input id="username" placeholder="Username"/>
<label for="password"></label><input id="password" type="password" placeholder="Password"/>
<button onclick="login()">Login</button>

<h2>Profile</h2>
<button onclick="getProfile()">Get Profile</button>

<p id="output"></p>

<script>
	const apiProfile = 'http://localhost:8888';
	let accessToken = '';
	async function login() {
		const res = await fetch(`${apiProfile}/auth/login`, {
			method: 'POST',
			headers: { 'Content-Type': 'application/json' },
			body: JSON.stringify({
				username: document.getElementById('username').value,
				password: document.getElementById('password').value
			})
		});

		if (!res.ok) {
			document.getElementById('output').innerText = await res.text();
			return;
		}
		const data = await res.json();
		console.log(JSON.stringify(data));
		accessToken = data.accessToken;
		document.getElementById('output').innerText = data.message;
	}

	async function getProfile() {
		const res = await fetch(`${apiProfile}/profile`, {
			method: 'GET',
			headers: { "Authorization": "Bearer " + accessToken }
		});
		document.getElementById('output').innerText = await res.text();
	}
</script>
</body>
</html>
